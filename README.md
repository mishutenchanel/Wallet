# Wallet
# Flask Wallet API

Этот проект представляет собой API для управления кошельками. API позволяет создавать кошельки, проверять их баланс, а также выполнять операции пополнения и снятия средств.

## Структура проекта

- **Flask** — используется для создания веб-сервера.
- **SQLAlchemy** — для взаимодействия с базой данных.
- **Redis** — для кеширования данных о балансе кошельков.
- **Waitress** — для запуска приложения на сервере.
- **PostgreSQL** — используется для хранения данных о кошельках.

## Способы взаимодействия с приложением
1) При переходе по адресу http://localhost:5000/ откывается страница ,на которой можно создать кошелек, пополнить баланс ,снять деньги и проверить баланс
2) С помощью запросов в консоли
- Создание кошелька: Invoke-WebRequest -Uri http://localhost:5000/api/v1/wallets -Method POST
- Получение баланса кошелька: Invoke-WebRequest -Uri http://localhost:5000/api/v1/wallets/<wallet_uuid> -Method GET.  Вместо <wallet_uuid> стоит указать UUID существующего кошелька
- Пополнение или снятие средств с кошелька: Invoke-WebRequest -Uri http://localhost:5000/api/v1/wallets/<wallet_uuid>/operation -Method POST -Body '{"operationType": "DEPOSIT", "amount": 50.0}' -ContentType "application/json".  Также стоит указать UUID существующего кошелька. DEPOSIT пишется для пополнения баланса ,WITHDRAW для снятия денег с баланса.
- Просмотр всех кошельков: Invoke-WebRequest -Uri http://localhost:5000/api/v1/wallets -Method GET

## Запуск проекта и работа с ним
Для запуска нужно поднять контейнер с помощью команды "docker-compose up --build". После этого сразу же выполнятся тесты. Чтобы провести locus тест для определения RPS нужно сначала создать кошелек, скопировать его UUID в код файла test_rps.py, затем перезапустить контейнер командой "docker-compose restart". После чего можно переходить по адресу http://localhost:8089/ и выбирать параметры для тестирования. 

Возможные коды ошибок:
- 400 Bad Request: Неверные данные в запросе (например, некорректный тип операции или сумма).
- 404 Not Found: Ресурс не найден (например, кошелек с данным UUID не существует).
- 500 Internal Server Error: Внутренняя ошибка сервера.



